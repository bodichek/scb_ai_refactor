{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
  <h2>üí∞ Profit vs Cash Flow</h2>

  <!-- V√Ωbƒõr roku -->
  <form method="get" class="mb-3">
    <label for="year" class="form-label"><strong>Vyber rok:</strong></label>
    <select name="year" id="year" class="form-select" onchange="this.form.submit()">
      {% for y in years %}
        <option value="{{ y }}" {% if y == selected_year %}selected{% endif %}>{{ y }}</option>
      {% endfor %}
    </select>
  </form>

  {% if error %}
    <div class="alert alert-danger">‚ùå {{ error }}</div>
  {% elif cf %}
    <table class="table table-striped table-bordered mt-3 align-middle text-center">
      <thead class="table-dark">
        <tr>
          <th>Polo≈æka</th>
          <th>Profit</th>
          <th>Cash Flow</th>
          <th>Rozd√≠l</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><strong>Tr≈æby</strong></td>
          <td>{{ cf.revenue|floatformat:0 }}</td>
          <td>{{ cf.gross_cash_profit|floatformat:0 }}</td>
          <td>{{ cf.variance.gross|floatformat:0 }}</td>
        </tr>
        <tr>
          <td><strong>Provozn√≠ zisk</strong></td>
          <td>{{ cf.operating_cash_profit|floatformat:0 }}</td>
          <td>{{ cf.operating_cash_flow|floatformat:0 }}</td>
          <td>{{ cf.variance.operating|floatformat:0 }}</td>
        </tr>
        <tr>
          <td><strong>ƒåist√Ω zisk</strong></td>
          <td>{{ cf.retained_profit|floatformat:0 }}</td>
          <td>{{ cf.net_cash_flow|floatformat:0 }}</td>
          <td>{{ cf.variance.net|floatformat:0 }}</td>
        </tr>
      </tbody>
    </table>

    <p class="text-muted small">
      <em>Data jsou poƒç√≠t√°na z finanƒçn√≠ch v√Ωkaz≈Ø pro rok {{ selected_year }}.</em>
    </p>
  {% else %}
    <p>‚ùó Zat√≠m nejsou dostupn√° data pro zobrazen√≠ cash flow.</p>
  {% endif %}
</div>
{% endblock %}
